# Embed Management Commands Documentation
## Overview
The Embed Management system provides administrators with powerful tools to clone, preview, and manage Discord embeds. All commands are organized under the `embed` command group and require appropriate permissions.
## Command Structure
All commands use the format: `!embed <subcommand> [parameters]`
## Commands
### `!embed` (Main Command)
**Purpose:** Displays the help menu with all available embed management commands.
**Permissions Required:** `manage_messages`
**Usage:** `!embed`
**Description:** Shows an interactive help menu listing all available embed management commands with brief descriptions.
### `!embed clone`
**Purpose:** Clones embeds from one message and reposts them in the same or different channel.
**Permissions Required:** `manage_messages`
**Cooldown:** 30 seconds per user
**Usage:**
```
!embed clone <message_link> [destination_channel] [keep_original]
```
**Parameters:**
- `message_link` (Required): Full Discord message URL containing the embed to clone
- `destination_channel` (Optional): Channel to send the cloned embed to (defaults to original channel)
- `keep_original` (Optional): `True` to preserve the original message, `False` to delete it (default: False)

**Features:**
- Clones all embeds from the target message (not just the first one)
- Only works with embeds sent by bots
- Comprehensive error handling for invalid links, permissions, and missing messages
- Detailed audit logging for administrative oversight
- Success confirmation with embed count and destination information

**Examples:**
```
!embed clone https://discord.com/channels/123456789/987654321/111111111
!embed clone https://discord.com/channels/123456789/987654321/111111111 #announcements
!embed clone https://discord.com/channels/123456789/987654321/111111111 #announcements True
```
### `!embed preview`
**Purpose:** Preview embed information before cloning to see details and structure.
**Permissions Required:** `manage_messages`
**Usage:**
```
!embed preview <message_link>
```
**Parameters:**
- `message_link` (Required): Full Discord message URL to preview

**Features:**
- Shows source information (channel, author, creation date, embed count)
- Displays detailed information for each embed including:
    - Title presence and content
    - Description character count
    - Number of fields
    - Color information
    - Image and thumbnail presence

- Safe preview without making any changes

**Example:**
```
!embed preview https://discord.com/channels/123456789/987654321/111111111
```
### `!embed batch`
**Purpose:** Clone multiple embeds from different messages in a single operation.
**Permissions Required:** `manage_messages`
**Cooldown:** 60 seconds per user
**Usage:**
```
!embed batch <message_link1> <message_link2> [message_link3] ...
```
**Parameters:**
- `message_links` (Required): Multiple Discord message URLs separated by spaces (maximum 10)

**Features:**
- Processes up to 10 messages at once for safety
- Shows real-time progress during operation
- Provides detailed completion summary with success/failure counts
- Total embed count tracking
- Individual error logging for failed operations
- Automatically deletes original messages after successful cloning

**Example:**
```
!embed batch https://discord.com/channels/123/456/111 https://discord.com/channels/123/456/222 https://discord.com/channels/123/456/333
```
### `!embed config`
**Purpose:** View and configure server-specific embed management settings.
**Permissions Required:** `administrator`
**Usage:**
```
!embed config [setting] [value]
```
**Parameters:**
- `setting` (Optional): Specific setting name to view or modify
- `value` (Optional): New value for the setting

**Available Settings:**
- `max_batch_size`: Maximum number of messages that can be batch cloned (default: 10)
- `cooldown_seconds`: Cooldown time between clone operations (default: 30)
- `allowed_roles`: Roles that can use embed commands (default: admin, moderator, embed manager)
- `auto_delete_original`: Whether to delete original messages by default (default: True)
- `log_channel`: Channel for detailed embed operation logging (default: None)

**Usage Examples:**
```
!embed config                           # View all settings
!embed config max_batch_size            # View specific setting
!embed config max_batch_size 15         # Modify setting
```
## Permission System
### Required Permissions
- **Basic Commands:** `manage_messages` permission or specific roles
- **Configuration:** `administrator` permission required
- **Custom Roles:** Users with roles named "admin", "moderator", or "embed manager" can use basic commands

### Safety Features
- Commands only work with bot-sent embeds to prevent abuse
- Batch operations limited to 10 messages maximum
- Cooldown timers prevent spam
- Comprehensive error handling prevents crashes
- Detailed logging for audit trails

## Error Handling
### Common Error Messages
- `❌ Invalid message link format` - Message URL is malformed
- `❌ The message does not contain any embeds or was not sent by a bot` - Target message invalid
- `❌ I do not have permission to access the specified channel` - Bot lacks required permissions
- `❌ The specified message or channel was not found` - Message/channel doesn't exist
- `❌ Maximum 10 messages can be cloned at once` - Batch limit exceeded

### Logging
All operations are logged with detailed information including:
- User identification and permissions
- Source and destination information
- Success/failure status
- Timestamp and audit trail
- Error details for troubleshooting

## Best Practices
1. **Use Preview First:** Always preview embeds before cloning to avoid mistakes
2. **Test Permissions:** Ensure the bot has necessary permissions in target channels
3. **Batch Wisely:** Use batch operations for efficiency but stay within limits
4. **Monitor Logs:** Review logs regularly for usage patterns and issues
5. **Configure Appropriately:** Adjust settings based on server size and usage needs
